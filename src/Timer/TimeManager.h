#ifndef _TIMER_MANAGER
#define _TIMER_MANAGER

////////////////////////////////////////////////////////////
// Includes
////////////////////////////////////////////////////////////
#include "SystemTime.h"
#include "..\Thread\Thread.h"
#include "..\Mutex\Mutex.h"

////////////////////////////////////////////////////////////
// Max timers
////////////////////////////////////////////////////////////
#define MAX_TIMER_COUT 20

////////////////////////////////////////////////////////////
/// Timer routine
////////////////////////////////////////////////////////////
typedef void(*TimerRoutine)();

////////////////////////////////////////////////////////////
/// Timer mutex
////////////////////////////////////////////////////////////
Mutex TimerMutex;

////////////////////////////////////////////////////////////
/// Start timer
////////////////////////////////////////////////////////////
int TimerStart;

////////////////////////////////////////////////////////////
// Timer struct
////////////////////////////////////////////////////////////
struct systemTime
{
	float currentTime;
	float timeEnd;
	int timeActive;
	int timeFinish;
	TimerRoutine Routine;
};

////////////////////////////////////////////////////////////
// Timer Thread
////////////////////////////////////////////////////////////
platformThread TimerThread;

////////////////////////////////////////////////////////////
// Timer manager
////////////////////////////////////////////////////////////
struct systemTime TimerManager[MAX_TIMER_COUT];

////////////////////////////////////////////////////////////
// Init timer manager
////////////////////////////////////////////////////////////
void TimerInitialize();

////////////////////////////////////////////////////////////
// Destroy timer manager
////////////////////////////////////////////////////////////
void TimerDestroy();

////////////////////////////////////////////////////////////
// Timer slot
////////////////////////////////////////////////////////////
int GetTimerSlot();

////////////////////////////////////////////////////////////
// Add a new timer
////////////////////////////////////////////////////////////
void AddTimer(float miliSecondsTime, int TimerFinish, TimerRoutine Routine);

////////////////////////////////////////////////////////////
// Delete timer
////////////////////////////////////////////////////////////
void DeleteTimer(int timerID);

////////////////////////////////////////////////////////////
// Timer routine
////////////////////////////////////////////////////////////
void TimerManagerRoutine();

#endif